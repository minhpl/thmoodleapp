<!-- Buttons to add to the header. -->
<core-navbar-buttons slot="end">
    <ion-button *ngIf="!showLoading && glossary && glossary.browsemodes && glossary.browsemodes.length > 1" (click)="openModePicker($event)"
        [attr.aria-label]="'addon.mod_glossary.browsemode' | translate">
        <ion-icon name="fas-sort" slot="icon-only" aria-hidden="true"></ion-icon>
    </ion-button>

    <ion-button *ngIf="!showLoading && glossary" (click)="toggleSearch()" [attr.aria-label]="'addon.mod_glossary.bysearch' | translate">
        <ion-icon name="fas-search" slot="icon-only" aria-hidden="true"></ion-icon>
    </ion-button>

    <ion-button *ngIf="!showLoading" fill="clear" (click)="openModuleSummary()" aria-haspopup="true"
        [attr.aria-label]="'core.info' | translate">
        <ion-icon name="fas-info-circle" slot="icon-only" aria-hidden="true"></ion-icon>
    </ion-button>
</core-navbar-buttons>

<!-- Content. -->
<core-split-view>
    <ion-refresher slot="fixed" [disabled]="showLoading" (ionRefresh)="doRefresh($event.target)">
        <ion-refresher-content pullingText="{{ 'core.pulltorefresh' | translate }}"></ion-refresher-content>
    </ion-refresher>

    <core-search-box *ngIf="isSearch" (onSubmit)="search($event)" [placeholder]="'addon.mod_glossary.searchquery' | translate"
        [autoFocus]="true" [lengthCheck]="2" (onClear)="toggleSearch()" searchArea="AddonModGlossary-{{module.id}}">
    </core-search-box>

    <core-loading [hideUntil]="!showLoading">
        <!-- Activity info. -->
        <core-course-module-info *ngIf="!isSearch" [module]="module" [description]="description" [component]="component"
            [componentId]="componentId" [courseId]="courseId" [hasDataToSync]="hasOffline" (completionChanged)="onCompletionChange()">
        </core-course-module-info>

        <ion-list *ngIf="!isSearch && entries && entries.offlineEntries.length > 0">
            <ion-item-divider>
                <ion-label>
                    <h2 class="big">{{ 'addon.mod_glossary.entriestobesynced' | translate }}</h2>
                </ion-label>
            </ion-item-divider>
            <ion-item *ngFor="let entry of entries.offlineEntries" (click)="entries.select(entry)" detail="false" button
                [attr.aria-current]="entries.getItemAriaCurrent(entry)">
                <ion-label>
                    <core-format-text [text]="entry.concept" contextLevel="module" [contextInstanceId]="glossary!.coursemodule"
                        [courseId]="courseId">
                    </core-format-text>
                </ion-label>
            </ion-item>
        </ion-list>

        <ion-list *ngIf="entries && entries.onlineEntries.length > 0">
            <ng-container *ngFor="let entry of entries.onlineEntries; let index = index">
                <ion-item-divider *ngIf="getDivider && showDivider(entry, entries.onlineEntries[index - 1])">
                    <ion-label>
                        <h2 class="big">{{ getDivider!(entry) }}</h2>
                    </ion-label>
                </ion-item-divider>

                <ion-item button (click)="entries.select(entry)" [attr.aria-current]="entries.getItemAriaCurrent(entry)" detail="false">
                    <ion-label>
                        <core-format-text [text]="entry.concept" contextLevel="module" [contextInstanceId]="glossary!.coursemodule"
                            [courseId]="courseId">
                        </core-format-text>
                    </ion-label>
                </ion-item>
            </ng-container>
        </ion-list>

        <core-empty-box *ngIf="(!entries || !entries.hasEntries) && (!isSearch || hasSearched)" icon="fas-list"
            [message]="'addon.mod_glossary.noentriesfound' | translate">
        </core-empty-box>

        <core-infinite-loading [enabled]="entries && !entries.completed && (!isSearch || hasSearched)" [error]="loadMoreError"
            (action)="loadMoreEntries($event)">
        </core-infinite-loading>
    </core-loading>

    <core-course-module-navigation collapsible-footer [hidden]="showLoading" [courseId]="courseId" [currentModuleId]="module.id">
    </core-course-module-navigation>

    <ion-fab slot="fixed" core-fab vertical="bottom" horizontal="end" *ngIf="canAdd && !showLoading">
        <ion-fab-button (click)="openNewEntry()" [attr.aria-label]="'addon.mod_glossary.addentry' | translate">
            <ion-icon name="fas-plus" aria-hidden="true"></ion-icon>
            <span class="sr-only">{{ 'addon.mod_glossary.addentry' | translate }}</span>
        </ion-fab-button>
    </ion-fab>
</core-split-view>
